<div id="banner-image"></div>

<div class="container-fluid">
    <h1 align="center" class="py-5">CAR POOLING OFFERS</h1>
    <div class="row py-5">
        <div class="col-4">
            <h4 class="mx-5">Filters :</h4> 
            <div class="filters">
                <h4>Filters:</h4>
                <div class="filter-group">
                    <label for="arrival-filter">Arrival Point:</label>
                    <div class="filter-options">
                        <input type="checkbox" id="arrival-filter1" name="arrival-filter" value="arrival1">
                        <label for="arrival-filter1">Arrival Point 1</label>
                        <input type="checkbox" id="arrival-filter2" name="arrival-filter" value="arrival2">
                        <label for="arrival-filter2">Arrival Point 2</label>
                    </div>
                </div>
                <div class="filter-group">
                    <label for="destination-filter">Destination Point:</label>
                    <div class="filter-options">
                        <input type="checkbox" id="destination-filter1" name="destination-filter" value="destination1">
                        <label for="destination-filter1">Destination Point 1</label>
                        <input type="checkbox" id="destination-filter2" name="destination-filter" value="destination2">
                        <label for="destination-filter2">Destination Point 2</label>
                    </div>
                </div>
                <div class="filter-group">
                    <label for="time-filter">Time:</label>
                    <div class="filter-options">
                        <input type="checkbox" id="time-filter1" name="time-filter" value="9AM">
                        <label for="time-filter1">9AM</label>
                        <input type="checkbox" id="time-filter2" name="time-filter" value="10AM">
                        <label for="time-filter2">10AM</label>
                    </div>
                </div>
                <button class="clear-button">Clear Filters</button>
            </div>
        </div>
        <div class="col-6">
            <div class="row">
                <div class="col-3">
                    <h4>Offers :</h4>
                </div>
                <div class="col-offset-3">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">Post offer</button>
                </div>
            </div>
            

            @for (offer of offers; track $index) {
                <div class="card mt-3">
                    <div class="card-body">
                      <h4>{{ offer.title }}</h4>
                      <h4>Posted by : {{ offer.offerer }}</h4>
                      <h4>Path : {{ offer.path }}</h4>
                      <h4>Departure Time : {{ offer.departure_time }}</h4>
                      <h4>Departure Date : {{ offer.departure_date }}</h4>
                      <h4>Seats remaining: {{ offer.nb_ppl }} </h4> 
                      <h4>Price : {{ offer.price }} DT</h4>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Post an offer</h5>
          <button type="button" class="close btn" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="row">
            <div class="mb-3 col-12">
                <input type="text" hidden class="form-control" placeholder="Sender" [(ngModel)]="id">
            </div>
            
            <div class="mb-3 col-12">
                <input type="text" class="form-control" placeholder="Title" [(ngModel)]="title">
            </div>
            
            <div class=" mb-3 col-12">
                <input type="text" class="form-control" placeholder="Description" [(ngModel)]="description">
            </div>
            
            <div class="mb-3 col-12">
                <input type="text" class="form-control" placeholder="Path" [(ngModel)]="path">
            </div>
              
            <div class="mb-3 col-12">
                <label for="numberOfPeople">Number of people:</label>
                <input id="numberOfPeople" type="number" class="form-control" placeholder="Number of people" [(ngModel)]="nb_ppl" [disabled]="type === 'Delivery'">
            </div>
        
            <div class="mb-3 col-12">
                <label for="departureTimeSelect">Departure Time:</label>
                <select id="departureTimeSelect" class="form-control" [(ngModel)]="departure_time" name="departureTime">
                  <option value="" disabled selected>Choose a time</option>
                  <option *ngFor="let time of availableTimes" [value]="time">{{time}}</option>
                </select>
              </div>
              
              
              <div class="mb-3 col-12">
                <label for="departureDate">Departure Date:</label>
                <input type="date" class="form-control" id="departureDate" [(ngModel)]="departure_date" name="departureDate">
              </div>

              <div class="mb-3 col-12">
                <label for="price">Price:</label>
                <input type="number" class="form-control" id="price" [(ngModel)]="price" name="price">
              </div>  
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" (click)="sendOffer()" class="btn btn-primary mt-1 me-2" data-bs-dismiss="modal">Post Offer</button>
          <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button> -->
        </div>
      </div>
    </div>
  </div>

<!-- <div class="container">
    <div class="row">
        <div class="col-6">
            <section id="offers">
                <h2>All Offers :</h2>
                <div class="row">
                    @for (offer of offers; track $index) {
                        <div class="card col-md-4 col-4 mb-5 mx-4">
                            <div class="card-body">
                                <i class="fa fa-paper-plane text-success" style="position: absolute; top: 10px; right: 70px; cursor: pointer;"(click)="recupererId(offer._id)" ></i>
                                <i class="fa fa-trash-alt text-danger" style="position: absolute; top: 10px; right: 10px; cursor: pointer;"  (click)="deleteOffer(offer._id)"></i>
                                <i class="fa-solid fa-pencil text-primary" style="position: absolute; top: 10px; right: 40px; cursor: pointer;"(click)="fillform(offer);selectedOffer = offer;"></i>
                                <h5 class="card-title mt-3">Title: {{ offer.title }}</h5>
                                <h6 class="card-subtitle mb-2 text-muted">Type: {{ offer.type }}</h6>
                                @if (offer.type == "Carpooling") {
                                    <p class="card-text">Seats: {{ offer.nb_ppl }}</p>
                                }@else {
                                    <p class="card-text">Packages: {{ offer.nb_pkg }}</p>
                                }
                                
                            </div>
                        </div>
                    }
                </div>
            </section>-->
        
            
            <!--
            <section id="requests">
                <h2>All Requests :</h2>
                <div class="row">
                    @for (req of requests; track $index) {
                        @if (req.state != "Approved" && req.state !="Declined") {
                        <div class="card col-3 mb-5 mx-4">
                            <div class="card-body">
                                <i class="fa fa-times text-danger" style="position: absolute; top: 10px; right: 10px; cursor: pointer;" (click)="declineRequest(req._id)"></i>
                                <i class="fa fa-check text-primary" style="position: absolute; top: 10px; right: 40px; cursor: pointer;" (click)="acceptRequest(req._id, req.offer)"></i>
            
                                <h5 class="card-title">Sender: {{ req.sender }}</h5>
                                <p class="card-text">Offer: {{ req.offer }}</p>
                                <p class="card-text">Departure: {{ req.departure }}</p>
                                <p class="card-text">Arrival: {{ req.arrival }}</p>
                            </div>
                        </div>
                        }
                    }
                </div>
            </section>
            -->
            
        <!--</div>
        <div class="col-6">
            @if (id) {
                <app-requests [offerId]="id"></app-requests>
            }@else{
                <app-requests></app-requests>
            }
        </div>
    </div>

</div>-->
